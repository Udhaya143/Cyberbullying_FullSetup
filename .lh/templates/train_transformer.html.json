{
    "sourceFile": "templates/train_transformer.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1762604523378,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762604651125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,64 +1,110 @@\n <!DOCTYPE html>\r\n <html lang=\"en\">\r\n <head>\r\n-  <meta charset=\"UTF-8\">\r\n-  <title>üöÄ Transformer Training Progress</title>\r\n-  <link rel=\"stylesheet\" href=\"/static/style.css\">\r\n-  <style>\r\n-    body { background-color: #f9fbff; font-family: 'Segoe UI', sans-serif; }\r\n-    .container { max-width: 600px; margin: 60px auto; background: #fff; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); padding: 25px; text-align: center; }\r\n-    h2 { color: #222; margin-bottom: 15px; }\r\n-    input[type=\"file\"] { margin: 15px 0; }\r\n-    button { background: #2563eb; color: #fff; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px; }\r\n-    button:hover { background: #1e40af; }\r\n-    .logs { margin-top: 20px; padding: 15px; background: #0f172a; color: #facc15; border-radius: 10px; text-align: left; font-family: monospace; height: 200px; overflow-y: auto; white-space: pre-wrap; }\r\n-    .back-links { margin-top: 20px; }\r\n-  </style>\r\n+    <meta charset=\"UTF-8\">\r\n+    <title>üöÄ Transformer Training Progress</title>\r\n+    <link rel=\"stylesheet\" href=\"/static/style.css\">\r\n+    <style>\r\n+        body {\r\n+            background-color: #f3f5fa;\r\n+            font-family: 'Segoe UI', sans-serif;\r\n+        }\r\n+        .container {\r\n+            max-width: 600px;\r\n+            background: white;\r\n+            padding: 40px;\r\n+            margin: 60px auto;\r\n+            border-radius: 16px;\r\n+            box-shadow: 0 4px 20px rgba(0,0,0,0.1);\r\n+            text-align: center;\r\n+        }\r\n+        h2 {\r\n+            color: #333;\r\n+        }\r\n+        .log-box {\r\n+            background: #0d1117;\r\n+            color: #fff;\r\n+            padding: 16px;\r\n+            text-align: left;\r\n+            font-family: monospace;\r\n+            border-radius: 8px;\r\n+            margin-top: 20px;\r\n+            min-height: 100px;\r\n+        }\r\n+        .btn {\r\n+            background-color: #0066ff;\r\n+            color: white;\r\n+            padding: 10px 20px;\r\n+            border: none;\r\n+            border-radius: 6px;\r\n+            cursor: pointer;\r\n+        }\r\n+        .btn:hover {\r\n+            background-color: #004ecc;\r\n+        }\r\n+        a {\r\n+            text-decoration: none;\r\n+            color: #0066ff;\r\n+            font-weight: bold;\r\n+        }\r\n+    </style>\r\n </head>\r\n <body>\r\n-  <div class=\"container\">\r\n-    <h2>üöÄ Transformer Training Progress</h2>\r\n-    <p>Select your dataset (.csv file):</p>\r\n-    <input type=\"file\" id=\"csvFile\" accept=\".csv\">\r\n-    <br>\r\n-    <button id=\"startBtn\">Start Training</button>\r\n+    <div class=\"container\">\r\n+        <h2>üöÄ Transformer Training Progress</h2>\r\n+        <p>Select your dataset (.csv file):</p>\r\n+        <input type=\"file\" id=\"fileInput\" accept=\".csv\"><br><br>\r\n+        <button class=\"btn\" id=\"uploadBtn\">Start Training</button>\r\n \r\n-    <div class=\"logs\" id=\"logBox\">‚åõ Waiting for training logs...</div>\r\n+        <div class=\"log-box\" id=\"logBox\">\r\n+            ‚è≥ Waiting for training logs...\r\n+        </div>\r\n \r\n-    <div class=\"back-links\">\r\n-      <a href=\"/\">üè† Back to Home</a> | <a href=\"/dashboard\">üìä Admin Dashboard</a>\r\n+        <br>\r\n+        <a href=\"/\">üè† Back to Home</a> | \r\n+        <a href=\"/dashboard\">üìä Admin Dashboard</a>\r\n     </div>\r\n-  </div>\r\n \r\n-  <script>\r\n-    const startBtn = document.getElementById('startBtn');\r\n-    const fileInput = document.getElementById('csvFile');\r\n-    const logBox = document.getElementById('logBox');\r\n+    <script>\r\n+        const uploadBtn = document.getElementById(\"uploadBtn\");\r\n+        const fileInput = document.getElementById(\"fileInput\");\r\n+        const logBox = document.getElementById(\"logBox\");\r\n \r\n-    startBtn.addEventListener('click', async () => {\r\n-      if (!fileInput.files.length) {\r\n-        alert(\"Please choose a CSV file first!\");\r\n-        return;\r\n-      }\r\n-      const formData = new FormData();\r\n-      formData.append(\"file\", fileInput.files[0]);\r\n+        uploadBtn.addEventListener(\"click\", async () => {\r\n+            const file = fileInput.files[0];\r\n+            if (!file) {\r\n+                alert(\"Please choose a CSV file first!\");\r\n+                return;\r\n+            }\r\n \r\n-      logBox.textContent = \"üöÄ Uploading and starting training...\\n\";\r\n+            logBox.innerHTML = \"üöÄ Uploading and starting training...\";\r\n \r\n-      try {\r\n-        const res = await fetch(\"/upload_train\", { method: \"POST\", body: formData });\r\n-        const data = await res.json();\r\n-        if (data.status === \"success\") {\r\n-          logBox.textContent += \"‚úÖ Training started! Now streaming logs...\\n\";\r\n-          const evtSource = new EventSource(\"/train_logs\");\r\n-          evtSource.onmessage = e => logBox.textContent += e.data + \"\\n\";\r\n-        } else {\r\n-          logBox.textContent += \"‚ùå Upload failed: \" + (data.message || \"unknown\") + \"\\n\";\r\n-        }\r\n-      } catch (err) {\r\n-        logBox.textContent += \"‚ùå Error: \" + err + \"\\n\";\r\n-      }\r\n-    });\r\n-  </script>\r\n+            const formData = new FormData();\r\n+            formData.append(\"file\", file);\r\n+\r\n+            try {\r\n+                const res = await fetch(\"/upload_train\", { method: \"POST\", body: formData });\r\n+                const data = await res.json();\r\n+                logBox.innerHTML = \"üì° \" + data.message;\r\n+            } catch (err) {\r\n+                logBox.innerHTML = \"‚ùå Upload failed: \" + err;\r\n+            }\r\n+\r\n+            // Stream logs after upload\r\n+            setTimeout(async () => {\r\n+                const response = await fetch(\"/train_logs\");\r\n+                const reader = response.body.getReader();\r\n+                const decoder = new TextDecoder();\r\n+                logBox.innerHTML = \"\";\r\n+\r\n+                while (true) {\r\n+                    const { done, value } = await reader.read();\r\n+                    if (done) break;\r\n+                    logBox.innerHTML += decoder.decode(value);\r\n+                    logBox.scrollTop = logBox.scrollHeight;\r\n+                }\r\n+            }, 3000);\r\n+        });\r\n+    </script>\r\n </body>\r\n </html>\r\n"
                },
                {
                    "date": 1762605738113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,106 +5,108 @@\n     <title>üöÄ Transformer Training Progress</title>\r\n     <link rel=\"stylesheet\" href=\"/static/style.css\">\r\n     <style>\r\n         body {\r\n-            background-color: #f3f5fa;\r\n-            font-family: 'Segoe UI', sans-serif;\r\n+            background: #f6f8fa;\r\n+            font-family: \"Poppins\", sans-serif;\r\n+            display: flex;\r\n+            justify-content: center;\r\n+            align-items: center;\r\n+            min-height: 100vh;\r\n         }\r\n         .container {\r\n-            max-width: 600px;\r\n             background: white;\r\n             padding: 40px;\r\n-            margin: 60px auto;\r\n-            border-radius: 16px;\r\n-            box-shadow: 0 4px 20px rgba(0,0,0,0.1);\r\n+            border-radius: 20px;\r\n+            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\r\n+            width: 650px;\r\n             text-align: center;\r\n         }\r\n-        h2 {\r\n-            color: #333;\r\n-        }\r\n-        .log-box {\r\n+        textarea {\r\n+            width: 100%;\r\n+            height: 220px;\r\n             background: #0d1117;\r\n-            color: #fff;\r\n-            padding: 16px;\r\n-            text-align: left;\r\n-            font-family: monospace;\r\n-            border-radius: 8px;\r\n-            margin-top: 20px;\r\n-            min-height: 100px;\r\n+            color: #c9d1d9;\r\n+            border: none;\r\n+            padding: 12px;\r\n+            border-radius: 10px;\r\n+            font-family: \"Courier New\", monospace;\r\n+            font-size: 14px;\r\n+            resize: none;\r\n         }\r\n-        .btn {\r\n-            background-color: #0066ff;\r\n+        button {\r\n+            background: #0055ff;\r\n             color: white;\r\n-            padding: 10px 20px;\r\n             border: none;\r\n-            border-radius: 6px;\r\n+            padding: 12px 30px;\r\n+            border-radius: 8px;\r\n             cursor: pointer;\r\n+            font-size: 16px;\r\n         }\r\n-        .btn:hover {\r\n-            background-color: #004ecc;\r\n+        button:hover { background: #003fcc; }\r\n+        .footer {\r\n+            margin-top: 20px;\r\n+            font-size: 14px;\r\n         }\r\n-        a {\r\n-            text-decoration: none;\r\n-            color: #0066ff;\r\n-            font-weight: bold;\r\n+        .emoji {\r\n+            font-size: 18px;\r\n         }\r\n     </style>\r\n </head>\r\n <body>\r\n-    <div class=\"container\">\r\n-        <h2>üöÄ Transformer Training Progress</h2>\r\n-        <p>Select your dataset (.csv file):</p>\r\n-        <input type=\"file\" id=\"fileInput\" accept=\".csv\"><br><br>\r\n-        <button class=\"btn\" id=\"uploadBtn\">Start Training</button>\r\n+<div class=\"container\">\r\n+    <h2>üöÄ Transformer Training Progress</h2>\r\n+    <p>Select your dataset (.csv file):</p>\r\n+    <input type=\"file\" id=\"csvFile\" accept=\".csv\">\r\n+    <br><br>\r\n+    <button onclick=\"uploadFile()\">Start Training</button>\r\n+    <br><br>\r\n+    <textarea id=\"logOutput\" readonly>‚è≥ Waiting for training logs...</textarea>\r\n \r\n-        <div class=\"log-box\" id=\"logBox\">\r\n-            ‚è≥ Waiting for training logs...\r\n-        </div>\r\n-\r\n-        <br>\r\n-        <a href=\"/\">üè† Back to Home</a> | \r\n-        <a href=\"/dashboard\">üìä Admin Dashboard</a>\r\n+    <div class=\"footer\">\r\n+        <a href=\"/\" class=\"emoji\">üè† Back to Home</a> |\r\n+        <a href=\"/dashboard\" class=\"emoji\">üìä Admin Dashboard</a>\r\n     </div>\r\n+</div>\r\n \r\n-    <script>\r\n-        const uploadBtn = document.getElementById(\"uploadBtn\");\r\n-        const fileInput = document.getElementById(\"fileInput\");\r\n-        const logBox = document.getElementById(\"logBox\");\r\n+<script>\r\n+async function uploadFile() {\r\n+    const fileInput = document.getElementById('csvFile');\r\n+    const logOutput = document.getElementById('logOutput');\r\n \r\n-        uploadBtn.addEventListener(\"click\", async () => {\r\n-            const file = fileInput.files[0];\r\n-            if (!file) {\r\n-                alert(\"Please choose a CSV file first!\");\r\n-                return;\r\n-            }\r\n+    if (!fileInput.files.length) {\r\n+        alert('Please select a CSV file first.');\r\n+        return;\r\n+    }\r\n \r\n-            logBox.innerHTML = \"üöÄ Uploading and starting training...\";\r\n+    logOutput.value = \"üöÄ Uploading and starting training...\\n\";\r\n \r\n-            const formData = new FormData();\r\n-            formData.append(\"file\", file);\r\n+    const formData = new FormData();\r\n+    formData.append('file', fileInput.files[0]);\r\n \r\n-            try {\r\n-                const res = await fetch(\"/upload_train\", { method: \"POST\", body: formData });\r\n-                const data = await res.json();\r\n-                logBox.innerHTML = \"üì° \" + data.message;\r\n-            } catch (err) {\r\n-                logBox.innerHTML = \"‚ùå Upload failed: \" + err;\r\n-            }\r\n+    const res = await fetch('/upload_train', { method: 'POST', body: formData });\r\n+    const data = await res.json();\r\n \r\n-            // Stream logs after upload\r\n-            setTimeout(async () => {\r\n-                const response = await fetch(\"/train_logs\");\r\n-                const reader = response.body.getReader();\r\n-                const decoder = new TextDecoder();\r\n-                logBox.innerHTML = \"\";\r\n+    if (data.error) {\r\n+        logOutput.value += `‚ùå Upload failed: ${data.error}`;\r\n+        return;\r\n+    }\r\n \r\n-                while (true) {\r\n-                    const { done, value } = await reader.read();\r\n-                    if (done) break;\r\n-                    logBox.innerHTML += decoder.decode(value);\r\n-                    logBox.scrollTop = logBox.scrollHeight;\r\n-                }\r\n-            }, 3000);\r\n-        });\r\n-    </script>\r\n+    logOutput.value += `‚úÖ ${data.message}\\n\\n`;\r\n+    startLogStream();\r\n+}\r\n+\r\n+function startLogStream() {\r\n+    const logOutput = document.getElementById('logOutput');\r\n+    const eventSource = new EventSource('/train_logs');\r\n+    eventSource.onmessage = function(event) {\r\n+        logOutput.value += event.data + \"\\n\";\r\n+        logOutput.scrollTop = logOutput.scrollHeight;\r\n+    };\r\n+    eventSource.onerror = function() {\r\n+        logOutput.value += \"\\n‚ö†Ô∏è [Stream Disconnected]\\n\";\r\n+        eventSource.close();\r\n+    };\r\n+}\r\n+</script>\r\n </body>\r\n </html>\r\n"
                }
            ],
            "date": 1762604523378,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <title>üöÄ Transformer Training Progress</title>\r\n  <link rel=\"stylesheet\" href=\"/static/style.css\">\r\n  <style>\r\n    body { background-color: #f9fbff; font-family: 'Segoe UI', sans-serif; }\r\n    .container { max-width: 600px; margin: 60px auto; background: #fff; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); padding: 25px; text-align: center; }\r\n    h2 { color: #222; margin-bottom: 15px; }\r\n    input[type=\"file\"] { margin: 15px 0; }\r\n    button { background: #2563eb; color: #fff; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-size: 16px; }\r\n    button:hover { background: #1e40af; }\r\n    .logs { margin-top: 20px; padding: 15px; background: #0f172a; color: #facc15; border-radius: 10px; text-align: left; font-family: monospace; height: 200px; overflow-y: auto; white-space: pre-wrap; }\r\n    .back-links { margin-top: 20px; }\r\n  </style>\r\n</head>\r\n<body>\r\n  <div class=\"container\">\r\n    <h2>üöÄ Transformer Training Progress</h2>\r\n    <p>Select your dataset (.csv file):</p>\r\n    <input type=\"file\" id=\"csvFile\" accept=\".csv\">\r\n    <br>\r\n    <button id=\"startBtn\">Start Training</button>\r\n\r\n    <div class=\"logs\" id=\"logBox\">‚åõ Waiting for training logs...</div>\r\n\r\n    <div class=\"back-links\">\r\n      <a href=\"/\">üè† Back to Home</a> | <a href=\"/dashboard\">üìä Admin Dashboard</a>\r\n    </div>\r\n  </div>\r\n\r\n  <script>\r\n    const startBtn = document.getElementById('startBtn');\r\n    const fileInput = document.getElementById('csvFile');\r\n    const logBox = document.getElementById('logBox');\r\n\r\n    startBtn.addEventListener('click', async () => {\r\n      if (!fileInput.files.length) {\r\n        alert(\"Please choose a CSV file first!\");\r\n        return;\r\n      }\r\n      const formData = new FormData();\r\n      formData.append(\"file\", fileInput.files[0]);\r\n\r\n      logBox.textContent = \"üöÄ Uploading and starting training...\\n\";\r\n\r\n      try {\r\n        const res = await fetch(\"/upload_train\", { method: \"POST\", body: formData });\r\n        const data = await res.json();\r\n        if (data.status === \"success\") {\r\n          logBox.textContent += \"‚úÖ Training started! Now streaming logs...\\n\";\r\n          const evtSource = new EventSource(\"/train_logs\");\r\n          evtSource.onmessage = e => logBox.textContent += e.data + \"\\n\";\r\n        } else {\r\n          logBox.textContent += \"‚ùå Upload failed: \" + (data.message || \"unknown\") + \"\\n\";\r\n        }\r\n      } catch (err) {\r\n        logBox.textContent += \"‚ùå Error: \" + err + \"\\n\";\r\n      }\r\n    });\r\n  </script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}